{% extends './base.html' %}

{% block content %}


<form>
    <label for="article-input">article to compare</label>
    <input type="text" id="article-input" name="article" value="{{ term.name }}" />
    <input type="submit" value="go" />
</form>

<script>
    $(function() {
        $("input#article-input").autocomplete({
            delay: 200,
            minLength: 2,
            source: function(request, response) {
                $.ajax({
                    url: "{% url 'wikiviews:autocomplete' %}",
                    data: {
                        q: request.term
                    },
                    success: function(data) {
                        if (data.items)
                            response(data.items);
                    }
                });
            }
        });
    });
</script>

<hr/>

<table style="border: 1px solid black;">
    <tr>
        <td>article</td>
        <td>views per year</td>
        <td>correlation</td>
    </tr>
    {% for a in correlations %}
    <tr>
        <td>{{ a.name }}</td>
        <td>{{ a.count }}</td>
        <td>{{ a.correlation }}</td>
        <!--<td><a href="{{ a.url }}" target="_blank">{{ a.url }}</a></td>-->
        <td>{{ a.views_decorator|safe }}</td>
    </tr>
    {% endfor %}
</table>



{% endblock %}